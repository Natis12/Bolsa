<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archivo de Informes</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@300;400;600&display=swap');
        body { font-family: 'Inter', sans-serif; background: #111; color: #f4f4f0; margin: 0; padding: 0; min-height: 100vh; display: flex; flex-direction: column; }
        .top-bar { padding: 20px 40px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; font-family: 'Space Grotesk', sans-serif; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .brand { color: #ff4d00; }
        .container { max-width: 900px; margin: 60px auto; padding: 0 20px; width: 100%; flex-grow: 1; }
        h1 { font-family: 'Space Grotesk', sans-serif; font-size: 3.5rem; margin-bottom: 10px; line-height: 1; text-transform: uppercase; letter-spacing: -2px; }
        .subtitle { color: #888; font-size: 1.2rem; margin-bottom: 60px; font-family: 'Space Grotesk', sans-serif; text-transform: uppercase; letter-spacing: 2px; }
        
        .timeline { border-left: 2px solid #333; padding-left: 40px; margin-left: 10px; }
        .report-card { position: relative; margin-bottom: 40px; }
        .report-card::before { content: ''; position: absolute; left: -46px; top: 5px; width: 10px; height: 10px; background: #ff4d00; border-radius: 50%; box-shadow: 0 0 10px #ff4d00; }
        
        .report-link { display: block; background: #1a1a1a; padding: 25px; border-radius: 8px; text-decoration: none; color: white; border: 1px solid #333; transition: all 0.3s ease; }
        .report-link:hover { transform: translateX(10px); border-color: #ff4d00; background: #222; }
        .report-title { font-family: 'Space Grotesk', sans-serif; font-size: 1.5rem; font-weight: 700; margin-bottom: 5px; display: block; }
        .report-meta { color: #666; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }
        .arrow { float: right; color: #ff4d00; font-size: 1.2rem; font-weight: bold; opacity: 0; transform: translateX(-10px); transition: all 0.3s; }
        .report-link:hover .arrow { opacity: 1; transform: translateX(0); }
        
        #loading { color: #666; font-style: italic; }
    </style>
</head>
<body>
    <div class="top-bar">
        <div>Financial Intelligence Unit</div>
        <div class="brand">/// ARCHIVO</div>
    </div>
    
    <div class="container">
        <h1>Centro de<br>Informes</h1>
        <div class="subtitle">An√°lisis de Mercado Diario</div>
        
        <div id="loading">Conectando con la base de datos...</div>
        <div class="timeline" id="list"></div>
    </div>

    <script>
        async function loadReports() {
            // TU USUARIO Y REPO
            const user = 'Natis12';
            const repo = 'Bolsa';
            
            try {
                const response = await fetch(`https://api.github.com/repos/${user}/${repo}/contents/`);
                const data = await response.json();
                
                // Filtrar y Ordenar (M√°s reciente arriba)
                const reports = data
                    .filter(f => f.name.startsWith('informe-') && f.name.endsWith('.html'))
                    .sort((a, b) => {
                        // Extraer fecha del nombre para ordenar bien: informe-02-02-2026...
                        const getDate = (n) => {
                            const m = n.match(/(\d{2})-(\d{2})-(\d{4})/);
                            return m ? new Date(`${m[3]}-${m[2]}-${m[1]}`) : new Date(0);
                        };
                        return getDate(b.name) - getDate(a.name);
                    });

                const list = document.getElementById('list');
                document.getElementById('loading').style.display = 'none';

                if(reports.length === 0) list.innerHTML = '<p style="color:#666">No hay informes publicados a√∫n.</p>';

                reports.forEach(file => {
                    // Formatear nombre: informe-02-02-2026.html -> 02 / 02 / 2026
                    const raw = file.name.replace('informe-', '').replace('.html', '').split('-');
		const cleanDate = `${raw[0]}/${raw[1]}/${raw[2]} - ${raw[3]}:${raw[4]}`;
                    
                    const item = document.createElement('div');
                    item.className = 'report-card';
                    item.innerHTML = `
                        <a href="${file.name}" class="report-link">
                            <span class="arrow">‚Üí</span>
                            <span class="report-title">INFORME DE MERCADO</span>
                            <span class="report-meta">üìÖ PUBLICADO: ${cleanDate}</span>
                        </a>
                    `;
                    list.appendChild(item);
                });

            } catch (error) {
                console.error(error);
                document.getElementById('loading').innerText = '‚ö†Ô∏è Error cargando lista (GitHub API Rate Limit).';
            }
        }
        loadReports();
    </script>
</body>
</html>